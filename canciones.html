<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles del √Ålbum - SoundSpace</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- BOT√ìN QUE MUESTRA LA SIDEBAR -->
    <button id="showSidebarBtn" class="show-sidebar-btn">‚ûï</button>

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <button class="sidebar-hide-btn">üóï</button>
        </div>

        <nav class="menu">
            <p class="section-title">Navegaci√≥n</p>
            <a href="index.html" class="active">Inicio</a>
            <a href="albumes.html">G√©neros</a>
            <a href="artistas.html">Artistas</a>
            <a href="compras.html">Mis Compras</a>
            <a href="tarjetas.html">Tarjetas</a>

            <p class="section-title">Del usuario</p>
            <a href="biblioteca.html">Biblioteca</a>
            <a href="favoritos.html">Favoritos</a>
        </nav>
    </aside>
    

    <!-- CONTENIDO -->
    <div class="content">
        <!-- HEADER -->
        <header class="header">
            <div class="header-logo">
                <img src="images/logo.png" alt="SoundSpace">
            </div>

            <div class="icons">
                <a href="#" class="icon-btn">üõí</a>

                <div class="user-dropdown">
                    <button class="user-btn icon-btn">üë§</button>

                    <div class="dropdown-menu">
                        <div class="user-info">
                            <strong id="userNameDisplay"></strong><br>
                            <small id="userEmailDisplay"></small>
                        </div>

                        <div class="dropdown-divider"></div>
                        <button id="logoutBtnDropdown" class="dropdown-item logout-btn">Cerrar Sesi√≥n</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- SECCI√ìN PRINCIPAL -->
        <main>
            <section class="catalog-section">
                <div class="catalog-container">
                    <div class="catalog-header">
                        <a href="artistas.html" class="back-btn">‚Üê Volver a Artistas</a>
                        <h2 id="albumTitle">Detalles del √Ålbum</h2>
                        <p id="albumArtist" style="color: #333;">Cargando informaci√≥n...</p>
                    </div>

                    <!-- INFORMACI√ìN DEL √ÅLBUM -->
                    <div class="album-details-container">
                        <div class="album-header">
                            <div class="album-cover">
                                <img id="albumCover" src="" alt="Portada del √°lbum">
                            </div>
                            <div class="album-info">
                                <h1 id="albumName" style="color: #222;">Cargando...</h1>
                                <div class="album-meta">
                                    <span class="meta-item" id="albumYear" style="color: #333; background: #f0f0f0;">A√±o: --</span>
                                    <span class="meta-item" id="albumGenre" style="color: #333; background: #f0f0f0;">G√©nero: --</span>
                                    <span class="meta-item" id="albumTracks" style="color: #333; background: #f0f0f0;">Temas: --</span>
                                    <span class="meta-item" id="albumDuration" style="color: #333; background: #f0f0f0;">Duraci√≥n: --</span>
                                </div>
                                <p id="albumDescription" class="album-description" style="color: #444;"></p>
                                <div class="album-price" style="color: #8b0000; font-weight: bold;">$599 MXN</div>
                                <div class="album-actions">
                                    <button class="buy-btn" id="buyAlbumBtn" style="background: #8b0000; color: white;">A√±adir al carrito</button>
                                    <button class="favorite-btn" id="favoriteBtn" style="color: #333; border: 1px solid #ccc;">‚ù§Ô∏è Agregar a Favoritos</button>
                                </div>
                            </div>
                        </div>

                        <!-- CALIFICACI√ìN -->
                        <div class="rating-section" style="background: #f9f9f9; border: 1px solid #ddd;">
                            <h3 style="color: #222;">Califica este √°lbum</h3>
                            <div class="rating-stars">
                                <span class="star" data-rating="1">‚òÖ</span>
                                <span class="star" data-rating="2">‚òÖ</span>
                                <span class="star" data-rating="3">‚òÖ</span>
                                <span class="star" data-rating="4">‚òÖ</span>
                                <span class="star" data-rating="5">‚òÖ</span>
                            </div>
                            <div class="rating-display" style="color: #333;">
                                <span id="currentRating" style="color: #8b0000; font-weight: bold;">0.0</span> / 5.0
                                <span id="ratingCount">(0 calificaciones)</span>
                            </div>
                            <div class="rating-actions">
                                <button id="submitRatingBtn" class="submit-rating-btn" style="background: #333; color: white;">Enviar Calificaci√≥n</button>
                            </div>
                        </div>

                        <!-- LISTA DE CANCIONES -->
                        <div class="songs-section">
                            <h3 style="color: #222; border-bottom: 2px solid #8b0000;">Lista de Canciones</h3>
                            <div id="songsList" class="songs-list">
                                <p style="color: #666; text-align: center; padding: 20px;">Cargando canciones...</p>
                            </div>
                        </div>
                    </div>

                </div>
            </section>
        </main>

        <footer>
            <p>¬© 2025 Soundspace - Todos los derechos reservados</p>
        </footer>
    </div>

    <!-- SCRIPTS -->
    <script>
        // Variables globales
        let currentAlbum = null;
        let userRating = 0;
        let isFavorite = false;
        let currentUserId = null;

        // ==================== FUNCIONES B√ÅSICAS DEL √ÅLBUM ====================

        // Cargar datos del √°lbum desde localStorage
        function loadAlbumData() {
            console.log('Cargando datos del √°lbum...');
            
            const albumData = localStorage.getItem('selectedAlbum');
            
            if (!albumData) {
                console.error('No hay datos de √°lbum en localStorage');
                showErrorMessage('No se encontr√≥ informaci√≥n del √°lbum. Volviendo a artistas...');
                setTimeout(() => {
                    window.location.href = 'artistas.html';
                }, 3000);
                return;
            }

            try {
                currentAlbum = JSON.parse(albumData);
                console.log('√Ålbum cargado:', currentAlbum);
                
                // Primero mostrar detalles del √°lbum
                displayAlbumDetails();
                loadSongs();
                
                // Configurar sistema de calificaci√≥n
                setupRatingSystem();
                
                // Configurar botones
                setupButtons();
                
                // Luego intentar obtener ID del usuario y cargar calificaci√≥n
                getUserId().then(userId => {
                    if (userId) {
                        currentUserId = userId;
                        console.log('ID de usuario obtenido:', currentUserId);
                        // Cargar calificaci√≥n despu√©s de un peque√±o retraso
                        setTimeout(() => {
                            loadRatingFromDB();
                            checkFavoriteStatus();
                        }, 500);
                    } else {
                        console.log('Usuario no autenticado o error al obtener ID');
                    }
                }).catch(error => {
                    console.error('Error al obtener ID de usuario:', error);
                });
                
            } catch (error) {
                console.error('Error al parsear datos del √°lbum:', error);
                showErrorMessage('Error al cargar informaci√≥n del √°lbum');
            }
        }

        // Mostrar detalles del √°lbum
        function displayAlbumDetails() {
            if (!currentAlbum) {
                console.error('No hay datos de √°lbum para mostrar');
                return;
            }

            console.log('Mostrando detalles del √°lbum:', currentAlbum);
            
            // T√≠tulo y artista
            document.getElementById('albumTitle').textContent = currentAlbum.titulo || 'Detalles del √Ålbum';
            document.getElementById('albumArtist').textContent = `Artista: ${currentAlbum.artista || 'Desconocido'}`;
            document.getElementById('albumName').textContent = currentAlbum.titulo || 'Cargando...';
            
            // Metadatos
            document.getElementById('albumYear').textContent = `A√±o: ${currentAlbum.anio || '--'}`;
            document.getElementById('albumGenre').textContent = `G√©nero: ${currentAlbum.genero || '--'}`;
            document.getElementById('albumTracks').textContent = `Temas: ${currentAlbum.temas || '--'}`;
            document.getElementById('albumDuration').textContent = `Duraci√≥n: ${formatDuration(currentAlbum.duracion) || '--:--'}`;
            document.getElementById('albumDescription').textContent = currentAlbum.descripcion || 'Sin descripci√≥n disponible';
            
            // Imagen del √°lbum
            const albumCover = document.getElementById('albumCover');
            if (currentAlbum.images && currentAlbum.images.mainImage) {
                albumCover.src = currentAlbum.images.mainImage;
                albumCover.alt = `Portada de ${currentAlbum.titulo}`;
                albumCover.onerror = function() {
                    this.src = 'images/placeholder.png';
                    console.log('Imagen no cargada, usando placeholder');
                };
            } else {
                albumCover.src = 'images/placeholder.png';
                albumCover.alt = 'Portada no disponible';
            }
            
            console.log('Detalles del √°lbum mostrados correctamente');
        }

        // Formatear duraci√≥n
        function formatDuration(duration) {
            if (!duration) return '--:--';
            
            try {
                // Si es un n√∫mero (segundos), convertirlo a mm:ss
                if (!isNaN(duration) && duration.toString().indexOf(':') === -1) {
                    const minutes = Math.floor(duration / 60);
                    const seconds = duration % 60;
                    return `${minutes}:${seconds.toString().padStart(2, '0')}`;
                }
                return duration;
            } catch (error) {
                console.error('Error formateando duraci√≥n:', error);
                return '--:--';
            }
        }

        // Cargar canciones desde la API
        function loadSongs() {
            if (!currentAlbum || !currentAlbum.id) {
                console.error('No hay ID de √°lbum para cargar canciones');
                return;
            }

            const songsList = document.getElementById('songsList');
            songsList.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">Cargando canciones...</p>';
            
            console.log(`Cargando canciones para √°lbum ID: ${currentAlbum.id}`);
            
            fetch(`api.php?action=getCancionesByAlbum&albumId=${currentAlbum.id}`)
                .then(res => {
                    if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
                    return res.json();
                })
                .then(data => {
                    console.log('Respuesta de canciones:', data);
                    
                    if (!data.success) {
                        songsList.innerHTML = `
                            <p style="color: #8b0000; text-align: center; padding: 20px;">
                                ${data.message || 'Error al cargar canciones'}
                            </p>
                        `;
                        return;
                    }
                    
                    if (!data.canciones || data.canciones.length === 0) {
                        songsList.innerHTML = `
                            <p style="color: #666; text-align: center; padding: 20px;">
                                ${data.message || 'Este √°lbum no tiene canciones disponibles'}
                            </p>
                        `;
                        return;
                    }
                    
                    displaySongs(data.canciones);
                })
                .catch(error => {
                    console.error('Error al cargar canciones:', error);
                    songsList.innerHTML = `
                        <p style="color: #8b0000; text-align: center; padding: 20px;">
                            Error de conexi√≥n al cargar canciones. Intenta recargar la p√°gina.
                        </p>
                    `;
                });
        }
        
        // Mostrar canciones en la tabla
        function displaySongs(canciones) {
            const songsList = document.getElementById('songsList');
            
            let songsHTML = `
                <table class="songs-table">
                    <thead style="background: #f5f5f5; color: #333;">
                        <tr>
                            <th style="text-align: center; padding: 15px; font-weight: bold; width: 60px;">#</th>
                            <th style="text-align: left; padding: 15px; font-weight: bold;">T√≠tulo</th>
                            <th style="text-align: center; padding: 15px; font-weight: bold; width: 100px;">Duraci√≥n</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            canciones.forEach((cancion, index) => {
                let duracionFormateada = cancion.duracion || '--:--';
                
                if (duracionFormateada && !isNaN(duracionFormateada) && duracionFormateada.toString().indexOf(':') === -1) {
                    const minutos = Math.floor(duracionFormateada / 60);
                    const segundos = duracionFormateada % 60;
                    duracionFormateada = `${minutos}:${segundos.toString().padStart(2, '0')}`;
                }
                
                songsHTML += `
                    <tr class="song-item">
                        <td class="song-number" style="text-align: center; color: #666; font-weight: bold; padding: 12px;">
                            ${index + 1}
                        </td>
                        <td class="song-title" style="padding: 12px; color: #222; font-size: 16px;">
                            ${cancion.titulo || `Canci√≥n ${index + 1}`}
                        </td>
                        <td class="song-duration" style="text-align: center; color: #666; padding: 12px; font-size: 14px;">
                            ${duracionFormateada}
                        </td>
                    </tr>
                `;
            });
            
            songsHTML += `
                    </tbody>
                </table>
            `;
            
            songsList.innerHTML = songsHTML;
            console.log(`Mostradas ${canciones.length} canciones`);
        }

        // ==================== SISTEMA DE CALIFICACI√ìN ====================

        // Configurar sistema de calificaci√≥n
        function setupRatingSystem() {
            console.log('Configurando sistema de calificaci√≥n...');
            
            const stars = document.querySelectorAll('.star');
            const submitBtn = document.getElementById('submitRatingBtn');
            
            // Inicializar estrellas en gris
            stars.forEach(star => {
                star.style.color = '#ccc';
                star.style.textShadow = 'none';
            });
            
            // Eventos para estrellas
            stars.forEach(star => {
                star.addEventListener('mouseover', function() {
                    if (userRating === 0) { // Solo hover si no hay calificaci√≥n
                        const rating = parseInt(this.getAttribute('data-rating'));
                        highlightStars(rating);
                    }
                });
                
                star.addEventListener('mouseout', function() {
                    if (userRating === 0) {
                        // Resetear a gris si no hay calificaci√≥n
                        stars.forEach(s => {
                            s.style.color = '#ccc';
                            s.style.textShadow = 'none';
                        });
                    } else {
                        // Mantener calificaci√≥n actual
                        highlightStars(userRating);
                    }
                });
                
                star.addEventListener('click', function() {
                    userRating = parseInt(this.getAttribute('data-rating'));
                    highlightStars(userRating);
                    document.getElementById('currentRating').textContent = userRating.toFixed(1);
                    console.log('Calificaci√≥n seleccionada:', userRating);
                });
            });
            
            // Bot√≥n para enviar calificaci√≥n
            submitBtn.addEventListener('click', submitRatingToDB);
            
            console.log('Sistema de calificaci√≥n configurado');
        }

        // Resaltar estrellas
        // Resaltar estrellas - VERSI√ìN SIMPLIFICADA
function highlightStars(rating) {
    const stars = document.querySelectorAll('.star');
    
    stars.forEach(star => {
        const starRating = parseInt(star.getAttribute('data-rating'));
        
        // Primero quitamos todas las clases
        star.classList.remove('selected', 'hover');
        
        // Aplicamos estilos directamente
        if (starRating <= rating) {
            star.style.color = '#ffd700'; // DORADO
            star.style.textShadow = '0 0 10px rgba(255, 215, 0, 0.7)';
            star.classList.add('selected');
        } else {
            star.style.color = '#ccc'; // GRIS
            star.style.textShadow = '0 1px 3px rgba(0,0,0,0.1)';
        }
    });
    
    console.log('Estrellas resaltadas:', rating);
}

        // Obtener ID del usuario
        async function getUserId() {
            const userEmail = localStorage.getItem('userEmail');
            if (!userEmail) {
                console.log('Usuario no autenticado');
                return null;
            }

            try {
                const response = await fetch('api.php?action=getUserId', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email: userEmail })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                
                if (data.success) {
                    console.log('ID de usuario obtenido:', data.userId);
                    return data.userId;
                } else {
                    console.log('Error al obtener ID de usuario:', data.message);
                    return null;
                }
            } catch (error) {
                console.error('Error en getUserId:', error);
                return null;
            }
        }

        // Cargar calificaci√≥n desde la base de datos
        async function loadRatingFromDB() {
            if (!currentUserId || !currentAlbum || !currentAlbum.id) {
                console.log('No se puede cargar calificaci√≥n: falta usuario o √°lbum');
                return;
            }

            try {
                console.log(`Cargando calificaci√≥n para usuario ${currentUserId}, √°lbum ${currentAlbum.id}`);
                
                const response = await fetch(`api.php?action=getRating&userId=${currentUserId}&albumId=${currentAlbum.id}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                console.log('Respuesta de calificaci√≥n:', data);
                
                if (data.success && data.calificacion > 0) {
                    userRating = parseInt(data.calificacion);
                    console.log('Calificaci√≥n cargada:', userRating);
                    
                    // Actualizar estrellas
                    highlightStars(userRating);
                    document.getElementById('currentRating').textContent = userRating.toFixed(1);
                } else {
                    userRating = 0;
                    console.log('No hay calificaci√≥n guardada');
                }
                
                // Cargar estad√≠sticas
                await loadRatingStats();
                
            } catch (error) {
                console.error('Error cargando calificaci√≥n:', error);
                userRating = 0;
            }
        }

        // Cargar estad√≠sticas de calificaciones
        async function loadRatingStats() {
            if (!currentAlbum || !currentAlbum.id) return;

            try {
                const response = await fetch(`api.php?action=getRatingStats&albumId=${currentAlbum.id}`);
                
                if (!response.ok) return;
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('ratingCount').textContent = `(${data.count || 0} calificaciones)`;
                }
            } catch (error) {
                console.error('Error cargando estad√≠sticas:', error);
            }
        }

        // Enviar calificaci√≥n a la base de datos
        async function submitRatingToDB() {
            if (userRating === 0) {
                alert('Por favor selecciona una calificaci√≥n');
                return;
            }

            if (!currentUserId) {
                alert('Debes iniciar sesi√≥n para calificar');
                window.location.href = 'login.html';
                return;
            }

            const albumId = currentAlbum.id;

            try {
                console.log(`Enviando calificaci√≥n: usuario ${currentUserId}, √°lbum ${albumId}, rating ${userRating}`);
                
                const response = await fetch('api.php?action=saveRating', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: currentUserId,
                        albumId: albumId,
                        rating: userRating
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                
                if (result.success) {
                    alert(`¬°Gracias por calificar con ${userRating} estrellas!`);
                    // Recargar estad√≠sticas
                    await loadRatingStats();
                } else {
                    alert('Error al guardar la calificaci√≥n: ' + result.message);
                }
            } catch (error) {
                console.error('Error enviando calificaci√≥n:', error);
                alert('Error de conexi√≥n al servidor');
            }
        }

        // ==================== FAVORITOS ====================

        // Verificar si el √°lbum est√° en favoritos
        async function checkFavoriteStatus() {
            if (!currentUserId || !currentAlbum || !currentAlbum.id) return;

            try {
                const response = await fetch(`api.php?action=checkFavorite&userId=${currentUserId}&albumId=${currentAlbum.id}`);
                
                if (!response.ok) return;
                
                const data = await response.json();
                
                if (data.success) {
                    isFavorite = data.isFavorite;
                    updateFavoriteButton();
                }
            } catch (error) {
                console.error('Error verificando favorito:', error);
            }
        }

        // Actualizar bot√≥n de favoritos
        function updateFavoriteButton() {
            const favoriteBtn = document.getElementById('favoriteBtn');
            if (!favoriteBtn) return;
            
            if (isFavorite) {
                favoriteBtn.textContent = '‚ù§Ô∏è Eliminar de Favoritos';
                favoriteBtn.style.backgroundColor = '#8b0000';
                favoriteBtn.style.color = 'white';
                favoriteBtn.style.borderColor = '#8b0000';
            } else {
                favoriteBtn.textContent = '‚ù§Ô∏è Agregar a Favoritos';
                favoriteBtn.style.backgroundColor = '';
                favoriteBtn.style.color = '#333';
                favoriteBtn.style.borderColor = '#ccc';
            }
        }

        // Alternar favorito
        async function addToFavorites() {
            if (!currentUserId) {
                alert('Debes iniciar sesi√≥n para agregar a favoritos');
                window.location.href = 'login.html';
                return;
            }

            const albumId = currentAlbum.id;

            try {
                const response = await fetch('api.php?action=toggleFavorite', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        userId: currentUserId,
                        albumId: albumId
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const result = await response.json();
                
                if (result.success) {
                    isFavorite = result.isFavorite;
                    updateFavoriteButton();
                    alert(result.message);
                } else {
                    alert('Error: ' + result.message);
                }
            } catch (error) {
                console.error('Error con favoritos:', error);
                alert('Error de conexi√≥n al servidor');
            }
        }

        // ==================== FUNCIONES AUXILIARES ====================

        // Configurar botones
        function setupButtons() {
            const favoriteBtn = document.getElementById('favoriteBtn');
            const buyBtn = document.getElementById('buyAlbumBtn');
            
            if (favoriteBtn) {
                favoriteBtn.addEventListener('click', addToFavorites);
            }
            
            if (buyBtn) {
                buyBtn.addEventListener('click', buyAlbum);
            }
        }

        // Comprar √°lbum
        function buyAlbum() {
            if (!currentAlbum) return;
            alert(`Comprando √°lbum: ${currentAlbum.titulo}\nPrecio: $599 MXN`);
        }

        // Mostrar mensaje de error
        function showErrorMessage(message) {
            const container = document.querySelector('.album-details-container');
            if (!container) return;
            
            container.innerHTML = `
                <div class="error-message" style="color: #8b0000; text-align: center; padding: 60px 20px;">
                    <h2 style="color: #8b0000; font-size: 32px; margin-bottom: 20px;">Error</h2>
                    <p style="font-size: 18px;">${message}</p>
                    <a href="artistas.html" class="back-btn" style="margin-top: 20px; display: inline-block;">
                        ‚Üê Volver a Artistas
                    </a>
                </div>
            `;
        }

        // ==================== INICIALIZACI√ìN ====================

        // Inicializar cuando se carga la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM cargado, inicializando p√°gina de canciones...');
            
            // Configurar historial
            history.pushState({ page: 'albumDetails' }, '', 'canciones.html');
            
            // Manejar bot√≥n de retroceso
            window.addEventListener('popstate', function(event) {
                if (document.referrer && document.referrer.includes('artistas.html')) {
                    window.location.href = 'artistas.html';
                }
            });

            // Cargar datos del √°lbum
            loadAlbumData();
            
            // Manejar recarga desde cache (back/forward)
            window.addEventListener('pageshow', function(event) {
                if (event.persisted) {
                    console.log('P√°gina cargada desde cache, recargando...');
                    loadAlbumData();
                }
            });
        });

    </script>

    <!-- Script principal -->
    <script src="main.js"></script>
    
    <!-- Estilos espec√≠ficos para canciones.html -->
    <style>
        /* LIMPIAR ESTILOS CONFLICTIVOS */
.rating-stars * {
    all: unset; /* Resetea estilos heredados */
    display: inline-block;
}

.rating-stars .star {
    all: revert; /* Vuelve a valores por defecto pero sin !important problem√°ticos */
    color: #ccc !important;
    font-size: 50px;
    cursor: pointer;
}

/* Sobrescribir espec√≠ficamente */
.rating-stars .star.selected,
.rating-stars .star[style*="ffd700"],
.rating-stars .star[style*="yellow"] {
    color: #ffd700 !important;
    text-shadow: 0 0 15px rgba(255, 215, 0, 0.6) !important;
}

        /* Asegurar que todo el texto sea visible */
        .catalog-section h2,
        .catalog-section p,
        .album-info h1,
        .album-description,
        .rating-section h3,
        .songs-section h3,
        .song-title,
        .song-number,
        .song-duration,
        .rating-display,
        .album-meta .meta-item {
            color: #333 !important;
        }
        
        /* Estilos generales para la p√°gina */
        .back-btn {
            display: inline-block;
            padding: 10px 20px;
            background: #8b0000;
            color: white !important;
            text-decoration: none;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 20px;
            font-size: 14px;
            font-weight: bold;
            transition: background 0.3s;
        }
        
        .back-btn:hover {
            background: #a00000;
            color: white !important;
            text-decoration: none;
        }
        
        .album-details-container {
            background: white;
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-top: 20px;
        }
        
        .album-header {
            display: flex;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .album-cover {
            flex: 0 0 300px;
        }
        
        .album-cover img {
            width: 100%;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .album-info {
            flex: 1;
        }
        
        .album-info h1 {
            margin: 0 0 10px 0;
            color: #222 !important;
            font-size: 32px;
        }
        
        .album-meta {
            display: flex;
            gap: 15px;
            margin: 15px 0;
        }
        
        .album-meta .meta-item {
            padding: 8px 15px;
            background: #f0f0f0;
            border-radius: 4px;
            font-size: 14px;
            color: #333 !important;
            border: 1px solid #ddd;
        }
        
        .album-description {
            line-height: 1.6;
            color: #444 !important;
            margin: 20px 0;
            font-size: 16px;
        }
        
        .album-price {
            font-size: 28px;
            font-weight: bold;
            color: #8b0000 !important;
            margin: 25px 0;
        }
        
        .album-actions {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .buy-btn {
            padding: 12px 30px;
            background: #8b0000 !important;
            color: white !important;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: background 0.3s;
        }
        
        .buy-btn:hover {
            background: #a00000 !important;
        }
        
        .favorite-btn {
            padding: 12px 25px;
            background: white;
            border: 1px solid #ddd !important;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            color: #333 !important;
            transition: all 0.3s;
        }
        
        .favorite-btn:hover {
            background: #f9f9f9;
            border-color: #8b0000 !important;
        }
        
        .rating-section {
            margin: 40px 0;
            padding: 25px;
            background: #f9f9f9 !important;
            border-radius: 8px;
            border: 1px solid #ddd !important;
        }
        
        .rating-section h3 {
            margin-top: 0;
            color: #222 !important;
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .rating-stars {
    font-size: 36px;
    margin: 20px 0;
    cursor: pointer;
}

/* Estrellas por defecto: blancas */
.rating-stars .star {
    font-size: 40px;
    cursor: pointer;
    color: #fff; /* blanco */
    transition: color 0.2s, transform 0.2s;
}

/* Estrella amarilla cuando se pasa el mouse o se selecciona */
.rating-stars .star.hover,
.rating-stars .star.selected {
    color: #ffd700;  /* amarillo */
    text-shadow: 0 0 8px #ffd700;
}

/* Peque√±a animaci√≥n al pasar el mouse */
.rating-stars .star:hover {
    transform: scale(1.1);
}

        
        /* El color dorado se aplica directamente con JavaScript */
        
        .rating-display {
            font-size: 20px;
            margin: 15px 0 25px 0;
            color: white !important;
        }
        
        .rating-display #currentRating {
            font-weight: bold;
            color: #8b0000 !important;
            font-size: 24px;
        }
        
        .submit-rating-btn {
            padding: 12px 30px;
            background: #333 !important;
            color: white !important;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        
        .submit-rating-btn:hover {
            background: #8b0000 !important;
        }
        
        .songs-section {
            margin-top: 50px;
        }
        
        .songs-section h3 {
            margin-bottom: 25px;
            color: #222 !important;
            font-size: 24px;
            border-bottom: 2px solid #8b0000;
            padding-bottom: 10px;
        }
        
        /* Estilos para la tabla de canciones SIN columna de Acciones */
        .songs-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .songs-table thead {
            background: #f5f5f5;
        }
        
        .songs-table th {
            text-align: left;
            padding: 15px;
            font-weight: bold;
            color: #333 !important;
            border-bottom: 2px solid #8b0000;
        }
        
        .songs-table th:nth-child(1) { /* Columna # */
            width: 60px;
            text-align: center;
        }
        
        .songs-table th:nth-child(2) { /* Columna T√≠tulo */
            text-align: left;
        }
        
        .songs-table th:nth-child(3) { /* Columna Duraci√≥n */
            width: 100px;
            text-align: center;
        }
        
        .song-item {
            border-bottom: 1px solid #eee;
            transition: background 0.2s;
        }
        
        .song-item:hover {
            background: #f9f9f9;
        }
        
        .song-item:last-child {
            border-bottom: none;
        }
        
        .song-number {
            width: 60px;
            text-align: center;
            color: #666 !important;
            padding: 12px;
            font-weight: bold;
        }
        
        .song-title {
            padding: 12px;
            font-weight: 500;
            font-size: 16px;
            color: #222 !important;
        }
        
        .song-duration {
            width: 100px;
            text-align: center;
            color: #666 !important;
            padding: 12px;
            font-size: 14px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .album-header {
                flex-direction: column;
            }
            
            .album-cover {
                flex: none;
                max-width: 250px;
                margin: 0 auto 20px;
            }
            
            .album-info {
                min-width: 100%;
            }
            
            .album-actions {
                flex-direction: column;
            }
            
            .buy-btn, .favorite-btn {
                width: 100%;
                text-align: center;
            }
            
            .song-title {
                font-size: 14px;
            }
            
            .song-number,
            .song-duration {
                font-size: 12px;
                padding: 10px;
            }
        }
        
        @media (max-width: 480px) {
            .album-cover {
                max-width: 200px;
            }
            
            .album-info h1 {
                font-size: 24px;
            }
            
            .album-meta {
                flex-direction: column;
                gap: 8px;
            }
            
            .rating-stars {
                font-size: 28px;
            }
            
            .song-item {
                display: grid;
                grid-template-columns: 50px 1fr 80px;
                grid-template-areas: "number title duration";
                padding: 10px;
                border-bottom: 1px solid #eee;
            }
            
            .song-number {
                grid-area: number;
                text-align: center;
                padding: 0;
                align-self: center;
            }
            
            .song-title {
                grid-area: title;
                padding: 0 10px;
                align-self: center;
            }
            
            .song-duration {
                grid-area: duration;
                text-align: center;
                padding: 0;
                align-self: center;
            }
            
            .songs-table thead {
                display: none;
            }
        }
    </style>
</body>
</html>